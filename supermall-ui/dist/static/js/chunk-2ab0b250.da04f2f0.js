(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ab0b250"],{2246:function(e,t,s){"use strict";s("b194")},"37f9":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-scrollbar",{staticStyle:{height:"100%"},attrs:{"wrap-style":"overflow-x: hidden"}},[s("el-row",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.load,expression:"load"}],attrs:{type:"flex",gutter:20,justify:"center","infinite-scroll-disabled":e.disabled,"infinite-scroll-immediate":"false","infinite-scroll-distance":"10"}},[e._l(Object.keys(this.goods),(function(t,i){return s("el-col",{style:e.getColCenterStyle(i),attrs:{span:3}},[s("good-lists",{attrs:{goods:e.goods[t]}})],1)})),s("el-col",{ref:"mergeWrap",staticClass:"col-merge-wrap",attrs:{span:9}},[s("el-swiper",{attrs:{slides:e.slides},on:{elCarouselFinish:e.elCarouselFinish}})],1)],2),e.loading?s("el-divider",{attrs:{"content-position":"center"}},[e._v("加载中...")]):e._e(),e.noMore?s("el-divider",{attrs:{"content-position":"center"}},[e._v("没有更多了")]):e._e()],1)},o=[],r=s("b775");function l(){return Object(r["a"])({url:"/api/slides",headers:{isToken:!1},method:"get",timeout:2e4})}function a(e){return Object(r["a"])({url:"/api/goods",headers:{isToken:!1},params:e,method:"get",timeout:2e4})}var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-carousel",{attrs:{trigger:"click","indicator-position":"none",height:"auto"}},[e._l(e.slides,(function(e){return s("el-carousel-item",[s("a",{staticStyle:{height:"100%"},attrs:{href:e.url}},[s("img",{ref:"slideImg",refInFor:!0,staticStyle:{width:"100%",height:"100%"},attrs:{src:e.img,alt:e.title}})])])})),s("img",{staticClass:"toolImg",attrs:{src:0==e.slides.length?null:this.slides[0].img},on:{load:e.elCarouselFinish}})],2)},d=[],c={name:"ElSwiper",props:{slides:{type:Array,default(){return[]}}},created(){},methods:{elCarouselFinish(){this.$emit("elCarouselFinish")}}},g=c,u=(s("2246"),s("2877")),h=Object(u["a"])(g,n,d,!1,null,"85afebb2",null),p=h.exports,m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",e._l(e.goods,(function(e){return s("goods-list-item",{attrs:{good:e}})})),1)},f=[],b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-link",{staticStyle:{padding:"10px"},attrs:{underline:!1,href:"/details/"+e.good.id}},[s("el-card",{staticClass:"good-item",attrs:{shadow:"hover","body-style":{padding:"0px",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"}},on:{click:e.itemClick}},[s("img",{attrs:{src:e.formatImgSrc(e.good.img),alt:""},on:{load:e.imageLoad}}),s("div",{ref:"goodText",staticClass:"good-text"},[s("span",{staticClass:"title"},[e._v(e._s(e.good.title))]),s("div",{staticClass:"good-info"},[s("p",{staticClass:"price"},[e._v("￥"),s("span",{staticClass:"f16"},[e._v(e._s((e.good.price+"").split(".")[0]))]),e.good.price.toString().includes(".")?s("span",[e._v(".")]):e._e(),s("span",[e._v(e._s((e.good.price+"").split(".")[1]))])]),s("span",{staticClass:"sales"},[e._v("销量"+e._s(e.good.sales))])])])])],1)},_=[],v={name:"GoodListItem",props:{good:{type:Object,default(){return{}}}},computed:{showImage(){return this.goodsItem.image||this.goodsItem.show.img}},methods:{imageLoad(){},itemClick(){console.log(this.good.id)},formatImgSrc(e){return e+"_400x9999.v1c7E.81.webp"}}},y=v,w=(s("ae64"),Object(u["a"])(y,b,_,!1,null,"45b5a206",null)),C=w.exports,S={name:"GoodLists",components:{GoodsListItem:C},props:{goods:{type:Array,default(){return new Array}}},data(){return{loading:!0}},computed:{noMore(){return!1},disabled(){return this.loading||this.noMore}},methods:{}},x=S,k=Object(u["a"])(x,m,f,!1,null,"68c12ae8",null),j=k.exports,I={name:"indexMain",components:{GoodLists:j,ElSwiper:p},data(){return{goods:{col1:[],col2:[],col3:[],col4:[],col5:[],col6:[],col7:[]},slidesHeight:0,loading:!1,currentPageNum:1,pageSize:30,pages:10,isShowBackTop:!1,slides:[],lastScrollY:0,currentType:"general",isMounted:!1,tabItems:[{index:"1",title:"综合"},{index:"2",title:"新款"},{index:"3",title:"流行"}]}},created(){this.getGoods({pageNum:this.currentPageNum,pageSize:this.pageSize}),this.getSlides()},mounted(){this.isMounted=!0},computed:{noMore(){return this.currentPageNum>this.pages},disabled(){return this.loading||this.noMore}},methods:{load(){this.getGoods({pageNum:this.currentPageNum,pageSize:this.pageSize})},getGoods(e){this.loading=!0,a(e).then(e=>{console.log(e);let t=e.data.records,s=t.length,i=Object.keys(this.goods).length;for(let o of Object.keys(this.goods))this.goods[o].push(...t.splice(0,s/i));this.currentPageNum=e.data.current+1,this.pages=e.data.pages,this.loading=!1,this.noMore&&this.$message({showClose:!0,message:"没有更多数据了",type:"warning"})})},getSlides(){l().then(e=>{this.slides=e.slides})},getColCenterStyle(e){if(this.isMounted&&e>=2&&e<=4)return{marginTop:this.slidesHeight}},elCarouselFinish(){this.slidesHeight=this.$refs.mergeWrap.$el.offsetHeight+20+"px"}}},M=I,O=(s("9b05"),Object(u["a"])(M,i,o,!1,null,"7a3c29e8",null));t["default"]=O.exports},3804:function(e,t,s){},"9b05":function(e,t,s){"use strict";s("e185")},ae64:function(e,t,s){"use strict";s("3804")},b194:function(e,t,s){},e185:function(e,t,s){}}]);